<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inicio de Sesión</title>
    <link rel="stylesheet" href="css/loginStyles.css">
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <header></header>
     <!-- Encabezado -->
     <header class="header">
        <!-- Logo -->
        <img class="logo" src="img/Logo_CONE.png" alt="Logo" >
        <!-- Menú de navegación -->
        <nav class="nav">
            <ul class="barnav">
                <li class="menu"><a href="index.html">Conferencia</a></li>
                <li class="menu"><a href="Eventos.html">Eventos</a></li>
                <li class="menu"><a href="quienes-somos.html">Quienes somos</a></li>
                <li class="menu" id="menu-var">
                    <a href="#programacion">Programacion C|O|N|E</a>
                    <div class="contact-bar1">
                        <button onclick="window.location.href='programar_eventos.html'">Programar Eventos</button>
                        <button onclick="window.location.href='programar_conferencias.html'">Programar Conferencias</button>
                    </div>
                </li>
              </li>
                <li class="menu"><a href="login.html">Entrar</a></li>
                <li class="menu"><a href="registrar.html">Registrarse</a></li>
            </ul>
        </nav>
    </header>
    <!-- Contenedor principal -->
    <h1 class="title-article">Inicio de sesión o registro</h1>
    <section class="formaCo">
        <div class="container">
            <h2 class="mensaje">Si ya eres usuario</h2>
            <!-- Diseño del formulario de inicio de sesión -->     
            <form id="loginForm" method="get">
                <div class="form-group">
                    <label for="username">Usuario</label>
            <input type="text" name="username" id="username" placeholder="Usuario" minlength="4" maxlength="20" required>
                </div>
                <div class="form-group">
                    <label for="password">Contraseña</label>
            <input type="password" name="password" id="password" placeholder="***********" minlength="8" required>
                </div>
                <div class="form-option">
                    <label><input type="checkbox" name="recordar">Recordar</label>
                    <a href="#" class="Recordatorio">Recuperar contraseña</a>
                </div>
                <button type="submit" class="btn-inicioSesion">ENTRAR</button>
            </form>
        </div>
        <div class="register-container">
            <h2 class="mensaje">¿No tienes cuenta?</h2>
            <button type="submit" class="btn-Registrarse" onclick="redirectToRegistrar()">REGISTRARSE</button>
        </div>
    </section>

    <!-- Pie de página -->
    <section class="pie_pag">
        <footer class="footer">
            <div class="footer-social-links">
                <h5 class="footer-heading">Follow @IEEE</h5>
                <ul class="footer-links">
                    <li><a class="twitter" href="https://ieeemce.org/news/">Página oficial de IEEE</a></li>
                </ul>
            </div>
            <div class="footer-social-links">
                <h5 class="footer-heading">Follow @ESPE</h5>
                <ul class="footer-links">
                    <li><a class="twitter" href="https://www.espe.edu.ec/">Página oficial de la ESPE</a></li>
                </ul>
            </div>
        </footer>
        <div class="row">
            <div class="col-md-6">
                <div class="sydney-credits">© Universidad de las Fuerzas Armadas ESPE <br> Todos los derechos reservados 2024</div>
            </div>
            <div class="col-md-6"></div>
        </div>
    </section>

    <script>
        // Array donde se almacenarán los usuarios
        let usuarios;
    
        // Función para cargar el archivo JSON de usuarios
        function cargarUsuarios() {
            fetch('usuarios/usuarios.json')
                .then(response => response.json())
                .then(data => {
                    usuarios = data;
                    console.log('Usuarios cargados:', usuarios);
                })
                .catch(error => console.error('Error al cargar usuarios:', error));
        }
    
        // Redireccionar a la página de registro
        function redirectToRegistrar() {
            window.location.href = 'registrar.html';
        }
    
        // Validar el inicio de sesión
        document.getElementById('loginForm').addEventListener('submit', function(event) {
            event.preventDefault();
            
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            
            const usuarioEncontrado = usuarios.find(user => user.usuario === username && user.contraseña === password);
            
            if (usuarioEncontrado) {
                // Usuario encontrado, redirigir a la página principal
                window.location.href = 'index.html';
            } else {
                // Usuario no encontrado, mostrar mensaje de error
                document.getElementById('message').textContent = 'Usuario o contraseña incorrectos';
            }
        });
    
        // Cargar usuarios al cargar la página
        window.onload = cargarUsuarios;
    
        // Redireccionar a la página de registro al hacer clic en el botón de registro
        const registerBtn = document.querySelector('.btn-registro');  
        registerBtn.addEventListener('click', redirectToRegistrar);
    </script>

</body>
</html>
